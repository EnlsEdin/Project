{"ast":null,"code":"import react,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router\";import Enemy from\"../components/Enemy\";import FilterButton from\"../components/FilterButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FILTER_MAP={All:()=>true,Elite:enemy=>enemy.type===\"elite\",Boss:enemy=>enemy.type===\"boss\",Special:enemy=>enemy.type===\"special\"};const FILTER_NAMES=Object.keys(FILTER_MAP);function EnemyList(){const[enemies,setEnemies]=useState([]);const[filter,setFilter]=useState(\"All\");const navigate=useNavigate();useEffect(()=>{async function getEnemies(){const response=await fetch(\"http://localhost:3500/api/enemies/\");if(!response.ok){const message=\"An error occurred: \".concat(response.statusText);window.alert(message);return;}const data=await response.json();setEnemies(data);}getEnemies();return;},[enemies.length]);async function deleteEnemy(id){await fetch(\"http://localhost:3500/api/enemies/\".concat(id),{method:\"DELETE\"});await fetch(\"http://localhost:3500/api/enemies/allSkill/\".concat(id),{method:\"DELETE\"});const newEnemies=enemies.filter(e=>e._id!==id);setEnemies(newEnemies);}const enemyList=enemies.filter(FILTER_MAP[filter]).map(enemy=>/*#__PURE__*/_jsx(Enemy,{id:enemy._id,name:enemy.name,type:enemy.type,description:enemy.description,skills:enemy.skills,deleteEnemy:()=>deleteEnemy(enemy._id)},enemy._id));const filterList=FILTER_NAMES.map(name=>/*#__PURE__*/_jsx(FilterButton,{name:name,isPressed:name===filter,setFilter:setFilter},name));function AddEnemy(){navigate('/AddEnemy');}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"EnemyList\"}),/*#__PURE__*/_jsxs(\"div\",{children:[filterList,/*#__PURE__*/_jsx(\"button\",{onClick:AddEnemy,children:\"Create Enemy\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:enemyList})]});}export default EnemyList;","map":{"version":3,"names":["react","useEffect","useState","Link","useNavigate","Enemy","FilterButton","jsx","_jsx","jsxs","_jsxs","FILTER_MAP","All","Elite","enemy","type","Boss","Special","FILTER_NAMES","Object","keys","EnemyList","enemies","setEnemies","filter","setFilter","navigate","getEnemies","response","fetch","ok","message","concat","statusText","window","alert","data","json","length","deleteEnemy","id","method","newEnemies","e","_id","enemyList","map","name","description","skills","filterList","isPressed","AddEnemy","children","onClick"],"sources":["C:/Users/q1109/Documents/Langara Study/Fall 2023/CPSC 2600/Project/analyzer/src/pages/EnemyList.js"],"sourcesContent":["import react,{useEffect,useState} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router\";\r\nimport Enemy from \"../components/Enemy\"\r\nimport FilterButton from \"../components/FilterButton\";\r\n\r\nconst FILTER_MAP = {\r\n    All: () => true,\r\n    Elite: (enemy) => enemy.type===\"elite\",\r\n    Boss: (enemy) => enemy.type===\"boss\",\r\n    Special: (enemy) => enemy.type===\"special\",\r\n  };\r\nconst FILTER_NAMES = Object.keys(FILTER_MAP)\r\n\r\n\r\nfunction EnemyList(){\r\n    const [enemies,setEnemies] = useState([]);\r\n    const [filter, setFilter] = useState(\"All\");\r\n    const navigate = useNavigate();\r\n    useEffect(()=>{\r\n        async function getEnemies(){\r\n            const response = await fetch(`http://localhost:3500/api/enemies/`);\r\n            if (!response.ok) {\r\n                const message = `An error occurred: ${response.statusText}`;\r\n                window.alert(message);\r\n                return;\r\n            }\r\n            const data = await response.json();\r\n            setEnemies(data);\r\n        }\r\n        getEnemies();\r\n        return;\r\n    },[enemies.length]);\r\n    async function deleteEnemy(id){\r\n        await fetch(`http://localhost:3500/api/enemies/${id}`, {\r\n            method: \"DELETE\"\r\n        });\r\n        await fetch(`http://localhost:3500/api/enemies/allSkill/${id}`,{\r\n            method: \"DELETE\"\r\n        });\r\n        const newEnemies = enemies.filter((e) => e._id !== id);\r\n        setEnemies(newEnemies);\r\n    }\r\n    const enemyList = enemies.filter(FILTER_MAP[filter]).map((enemy) => (\r\n        <Enemy\r\n            key={enemy._id}\r\n            id={enemy._id}\r\n            name={enemy.name}\r\n            type={enemy.type}\r\n            description={enemy.description}\r\n            skills={enemy.skills}\r\n            deleteEnemy={() => deleteEnemy(enemy._id)}\r\n        />\r\n    ));\r\n    const filterList = FILTER_NAMES.map((name) => (\r\n        <FilterButton key={name} name={name} isPressed={name === filter} setFilter={setFilter} />\r\n      ));\r\n    function AddEnemy(){\r\n        navigate('/AddEnemy');\r\n    }\r\n    return(\r\n        <div>\r\n            <h1>EnemyList</h1>\r\n            <div>\r\n                {filterList}\r\n                <button onClick={AddEnemy}>Create Enemy</button>\r\n            </div>\r\n            <ul>\r\n                {enemyList}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EnemyList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}